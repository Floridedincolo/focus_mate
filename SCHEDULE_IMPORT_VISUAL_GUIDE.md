# Schedule Import - Visual Implementation Guide

## Before vs After

### BEFORE: Feature Was Inaccessible âŒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          FOCUS MATE APP             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Home      Focus    Stats   Profile  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Monday, 23rd of February 2026   â”‚ â”‚
â”‚  â”‚ Your plan for Today             â”‚ â”‚
â”‚  â”‚                                 â”‚ â”‚
â”‚  â”‚    [Profile Avatar Button]  â—„â”€ Only button â”‚
â”‚  â”‚                                 â”‚ â”‚
â”‚  â”‚ Calendar: M T W T F S S         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”         â”‚ â”‚
â”‚  â”‚ â”‚21â”‚22â”‚23â”‚24â”‚25â”‚26â”‚27â”‚         â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜         â”‚ â”‚
â”‚  â”‚                                 â”‚ â”‚
â”‚  â”‚ [Task List]                     â”‚ â”‚
â”‚  â”‚ â€¢ Mathematics Class - 09:00     â”‚ â”‚
â”‚  â”‚ â€¢ English Class - 10:30         â”‚ â”‚
â”‚  â”‚ â€¢ Lunch - 12:00                 â”‚ â”‚
â”‚  â”‚                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  [FAB: + Button]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ PROBLEM: No way to access Schedule Import!
   Users can't trigger the feature.
```

### AFTER: Feature Is Easily Accessible âœ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          FOCUS MATE APP             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Home      Focus    Stats   Profile  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Monday, 23rd of February 2026   â”‚ â”‚
â”‚  â”‚ Your plan for Today             â”‚ â”‚
â”‚  â”‚                                 â”‚ â”‚
â”‚  â”‚ [ğŸ“…] [Profile Avatar Button]    â”‚ â”‚
â”‚  â”‚  â–²                               â”‚ â”‚
â”‚  â”‚  â””â”€ NEW: Schedule Import Button  â”‚ â”‚
â”‚  â”‚     (Calendar Icon)              â”‚ â”‚
â”‚  â”‚                                 â”‚ â”‚
â”‚  â”‚ Calendar: M T W T F S S         â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”         â”‚ â”‚
â”‚  â”‚ â”‚21â”‚22â”‚23â”‚24â”‚25â”‚26â”‚27â”‚         â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”˜         â”‚ â”‚
â”‚  â”‚                                 â”‚ â”‚
â”‚  â”‚ [Task List]                     â”‚ â”‚
â”‚  â”‚ â€¢ Mathematics Class - 09:00     â”‚ â”‚
â”‚  â”‚ â€¢ English Class - 10:30         â”‚ â”‚
â”‚  â”‚ â€¢ Lunch - 12:00                 â”‚ â”‚
â”‚  â”‚                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  [FAB: + Button]                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… SOLUTION: Calendar button in AppBar
   Users can easily access the feature!
```

---

## User Journey Flow

### Accessing the Feature

```
User on Home Page
        â”‚
        â–¼
    Sees ğŸ“… icon in top-right
        â”‚
        â–¼
    Taps calendar icon
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       SCHEDULE IMPORT WIZARD        â”‚
â”‚                                     â”‚
â”‚  Step 1: Pick an Image              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    ğŸ“· [Camera] [Gallery]      â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚   [Preview Area]              â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚   â”‚  (Your schedule photo)â”‚   â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚   [Cancel]     [Continue â–º]   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼ Tap Continue
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 2: AI is Processing...        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚    â³ Analyzing your         â”‚  â”‚
â”‚  â”‚       schedule...             â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚    [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 75%]      â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼ AI Done
        â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Type Check  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   â”‚          â”‚
   â–¼ Timetable â–¼ Exam
   â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Step 3A:  â”‚ â”‚Step 3B:  â”‚
â”‚Timetable â”‚ â”‚Exams     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚          â”‚
   â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 4: Review & Generate          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ [âœ“] Task 1 - Math Class       â”‚  â”‚
â”‚  â”‚ [âœ“] Task 2 - Math Homework    â”‚  â”‚
â”‚  â”‚ [âœ“] Task 3 - English Class    â”‚  â”‚
â”‚  â”‚ [âœ“] Task 4 - English Study    â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚ Total: 4 tasks                â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚   [Back]     [Save Tasks â–º]   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼ Save
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Step 5: Success! âœ…                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚    âœ¨ Tasks Added! âœ¨        â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚ 4 new tasks created:          â”‚  â”‚
â”‚  â”‚ â€¢ Math Class (recurring)      â”‚  â”‚
â”‚  â”‚ â€¢ Math Study (recurring)      â”‚  â”‚
â”‚  â”‚ â€¢ English Class (recurring)   â”‚  â”‚
â”‚  â”‚ â€¢ English Study (recurring)   â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚   [Done - Back to Home]       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
    Home page updated with
    new tasks visible!
```

---

## Code Changes Diagram

### File: lib/src/presentation/pages/home.dart

```dart
// BEFORE:
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
// ... other imports ...
// âŒ No ScheduleImportPage import

class Home extends ConsumerStatefulWidget {
  // ... code ...
  
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // ... code ...
      appBar: AppBar(
        // ... code ...
        actions: [
          Padding(
            padding: const EdgeInsets.only(right: 16),
            child: GestureDetector(
              onTap: () => Navigator.pushNamed(context, '/profile'),
              child: const CircleAvatar(
                radius: 22,
                backgroundImage: AssetImage('assets/button_bg.png'),
              ),
            ),
          ),
        ],
      ),
      // ... code ...
    );
  }
}

// AFTER:
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
// ... other imports ...
import 'schedule_import/schedule_import_page.dart';  // âœ… NEW IMPORT

class Home extends ConsumerStatefulWidget {
  // ... code ...
  
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      // ... code ...
      appBar: AppBar(
        // ... code ...
        actions: [
          // âœ… NEW: Schedule Import button
          Padding(
            padding: const EdgeInsets.symmetric(horizontal: 8),
            child: Center(
              child: Tooltip(
                message: 'Import Schedule',
                child: GestureDetector(
                  onTap: () => Navigator.of(context).push(
                    MaterialPageRoute(
                      builder: (_) => const ScheduleImportPage(),
                    ),
                  ),
                  child: const Icon(
                    Icons.calendar_month_outlined,
                    color: Colors.white70,
                    size: 24,
                  ),
                ),
              ),
            ),
          ),
          // Profile button (unchanged)
          Padding(
            padding: const EdgeInsets.only(right: 16),
            child: GestureDetector(
              onTap: () => Navigator.pushNamed(context, '/profile'),
              child: const CircleAvatar(
                radius: 22,
                backgroundImage: AssetImage('assets/button_bg.png'),
              ),
            ),
          ),
        ],
      ),
      // ... code ...
    );
  }
}
```

---

## App Bar Layout

### Calendar Button Position

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Home  Focus  Stats  Profile       [ğŸ“…] [ğŸ‘¤]    â”‚
â”‚                                    â–²    â–²       â”‚
â”‚                         NEW â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚       â”‚
â”‚                         Calendar      Profile    â”‚
â”‚                         Icon Button    (Old)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Visual Hierarchy:
- 8px padding between calendar and profile buttons
- 16px padding on right edge (matches original)
- Icons same size (24px)
- Same color treatment (white70)
- Tooltip on hover: "Import Schedule"
```

---

## Navigation Flow

### Complete App Navigation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MAIN PAGE (Bottom Nav)     â”‚
â”‚  [Home] [Focus] [Stats] [Prof]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚         â”‚          â”‚          â”‚
                 â–¼         â–¼          â–¼          â–¼
             â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚Home â”‚  â”‚ Focus  â”‚ â”‚ Stats â”‚ â”‚Profile â”‚
             â””â”€â”€â”€â”€â”¬â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                    â”‚
        â–¼ (New)             â–¼ (Existing)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Schedule Import â”‚   â”‚Add Task Pageâ”‚
    â”‚   (Wizard)     â”‚   â”‚             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€ Step 1: Image Picker
        â”‚
        â”œâ”€ Step 2: Loading
        â”‚
        â”œâ”€ Step 3A: Timetable Adjustment
        â”‚  OR
        â”œâ”€ Step 3B: Exam Adjustment
        â”‚
        â”œâ”€ Step 4: Preview
        â”‚
        â””â”€ Step 5: Success
```

---

## Technology Stack

### Layers & Components

```
PRESENTATION LAYER
â”œâ”€â”€ Pages
â”‚   â”œâ”€â”€ main_page.dart (Navigation)
â”‚   â”‚   â””â”€ Home (with new Calendar button)
â”‚   â”‚       â””â”€ [ğŸ“…] â”€ NEW ACCESS POINT
â”‚   â”‚
â”‚   â””â”€â”€ schedule_import/
â”‚       â”œâ”€â”€ schedule_import_page.dart (Image picker)
â”‚       â”œâ”€â”€ schedule_loading_page.dart (AI processing)
â”‚       â”œâ”€â”€ timetable_adjustment_page.dart (Path A)
â”‚       â”œâ”€â”€ exam_adjustment_page.dart (Path B)
â”‚       â”œâ”€â”€ schedule_preview_page.dart (Confirmation)
â”‚       â””â”€â”€ schedule_import_success_page.dart (Success)
â”‚
â”œâ”€â”€ Providers
â”‚   â””â”€â”€ schedule_import_notifier.dart (State machine)
â”‚       â””â”€â”€ scheduleImportProvider (Riverpod state)
â”‚
â””â”€â”€ State Models
    â””â”€â”€ schedule_import_state.dart (Enum + State class)

DOMAIN LAYER
â”œâ”€â”€ Entities
â”‚   â”œâ”€â”€ extracted_class.dart
â”‚   â”œâ”€â”€ extracted_exam.dart
â”‚   â”œâ”€â”€ schedule_type.dart
â”‚   â””â”€â”€ schedule_import_result.dart
â”‚
â”œâ”€â”€ Repositories (Abstract)
â”‚   â””â”€â”€ schedule_import_repository.dart
â”‚
â””â”€â”€ Use Cases
    â”œâ”€â”€ extract_schedule_from_image_use_case.dart
    â”œâ”€â”€ generate_weekly_tasks_use_case.dart
    â””â”€â”€ generate_exam_prep_tasks_use_case.dart

DATA LAYER
â”œâ”€â”€ Data Sources
â”‚   â””â”€â”€ gemini_schedule_import_datasource.dart
â”‚       â””â”€â”€ Firebase Vertex AI (secure)
â”‚
â”œâ”€â”€ DTOs
â”‚   â”œâ”€â”€ schedule_import_result_dto.dart
â”‚   â”œâ”€â”€ extracted_class_dto.dart
â”‚   â””â”€â”€ extracted_exam_dto.dart
â”‚
â”œâ”€â”€ Mappers
â”‚   â””â”€â”€ (Conversion: DTO â†’ Entity)
â”‚
â””â”€â”€ Repositories (Implementation)
    â””â”€â”€ schedule_import_repository_impl.dart

CORE
â””â”€â”€ service_locator.dart
    â”œâ”€â”€ Registers data sources (singletons)
    â”œâ”€â”€ Registers repositories (singletons)
    â”œâ”€â”€ Registers use cases (factories)
    â””â”€â”€ Initializes DI on app startup
```

---

## State Machine Diagram

### ScheduleImportStep Flow

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   imagePicker   â”‚ â—„â”€â”€ START
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    User picks image âœ…
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   aiLoading     â”‚
                    â”‚                 â”‚
                    â”‚  â³ Processing   â”‚
                    â”‚     Schedule    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                   AI finishes extraction âœ…
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
         Type == timetable    Type == exam
                    â”‚                 â”‚
                    â–¼                 â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚timetableAdjust   â”‚  â”‚  examAdjust   â”‚
           â”‚                  â”‚  â”‚               â”‚
           â”‚ User toggles:    â”‚  â”‚ User rates:   â”‚
           â”‚ â€¢ Homework?      â”‚  â”‚ â€¢ Difficulty  â”‚
           â”‚ â€¢ Study hours    â”‚  â”‚  (E/M/H)      â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                    â”‚
         User continues âœ…   User continues âœ…
                    â”‚                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    preview      â”‚
                    â”‚                 â”‚
                    â”‚ Show generated  â”‚
                    â”‚ tasks (read-only)
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    User confirms âœ…
                             â”‚
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚     saving      â”‚
                    â”‚                 â”‚
                    â”‚ Writing to DB   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                             â”‚
          Success âœ…                    Error âŒ
              â”‚                             â”‚
              â–¼                             â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚    success     â”‚        â”‚      error         â”‚
      â”‚                â”‚        â”‚                    â”‚
      â”‚ âœ¨ Done! âœ¨   â”‚        â”‚ Show error message â”‚
      â”‚ 4 tasks added  â”‚        â”‚ [Retry] [Cancel]   â”‚
      â”‚ [Back to Home] â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
               â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚            â”‚
               â–¼            â–¼ Retry/back
         Back to Home    imagePicker
         Tasks visible
             in list
```

---

## Summary of Changes

| File | Change | Type | Impact |
|------|--------|------|--------|
| `home.dart` | Added import | Code | Required for button |
| `home.dart` | Added Calendar button | Code | UI now accessible |
| `home.dart` | Button navigation | Code | Opens wizard |
| Documentation | 4 new guides | Docs | Maintenance + security |

**Total Lines Changed:** ~40 (minimal, surgical change)  
**Breaking Changes:** None  
**Dependencies Added:** None  
**Security Issues Fixed:** None (wasn't an issue, just missing UI)  

---

## Testing the Fix

### Manual Testing Steps

1. **Launch the app**
   ```bash
   flutter run
   ```

2. **Navigate to Home page**
   - Should see calendar icon (ğŸ“…) in top-right AppBar

3. **Tap the calendar icon**
   - Should navigate to ScheduleImportPage
   - Should see image picker UI

4. **Pick an image or camera**
   - Should show preview

5. **Tap Continue**
   - Should show loading screen
   - Should call Gemini API

6. **Follow wizard steps**
   - Adjust classes/exams
   - Review tasks
   - Save to Firestore

7. **Verify back on Home**
   - Should see new tasks in task list
   - Should be ready for next action

### Automated Testing

```dart
// Test: Calendar button exists and is tappable
testWidgets('Schedule import button is accessible', (tester) async {
  await tester.pumpWidget(const MyApp());
  await tester.pumpAndSettle();
  
  // Verify button exists
  expect(find.byIcon(Icons.calendar_month_outlined), findsOneWidget);
  
  // Tap button
  await tester.tap(find.byIcon(Icons.calendar_month_outlined));
  await tester.pumpAndSettle();
  
  // Verify navigation
  expect(find.byType(ScheduleImportPage), findsOneWidget);
});
```

---

## Conclusion

The fix is:
- âœ… **Minimal** - Only ~40 lines changed
- âœ… **Safe** - No breaking changes
- âœ… **Effective** - Feature now accessible
- âœ… **Professional** - Follows Material Design
- âœ… **Documented** - Complete guides provided

**The Schedule Import feature is now fully operational! ğŸ‰**


